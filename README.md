## Packages set for NodeJs applications

### Main goals and motivation
The motivation and goals of the set are:
- facilitate and speed up the  application development process due to the absence of the need for coding and testing of basic features;  
- ensure the quality of basic features through automated testing and repeated usage in production;  
- improve support for basic features;  
- and finally, as a consequence reduce the development costs.  

### Content (not final, will be growing)
The set contains the following groups:  
####   1. Private: - small packages are dedicated to be used as part of a package sets. 

<div class="tg-wrap"><table>
<thead>
  <tr>
    <th>#</th>
    <th>Name</th>
    <th>Code</th>
    <th>Package</th>
    <th>Purpose</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>01</td>
    <td>auth-jwt</td>
    <td><a href="https://github.com/JuliusAgency/auth-jwt">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-jwt">Link</a></td>
    <td>Authentication with JWT</td>
  </tr>
  <tr>
    <td>02</td>
    <td>auth-session</td>
    <td><a href="https://github.com/JuliusAgency/auth-session">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-session">Link</a></td>
    <td>Authentication with session</td>
  </tr>
  <tr>
    <td>03</td>
    <td>auth-strategies</td>
    <td><a href="https://github.com/JuliusAgency/auth-strategies">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-strategies">Link</a></td>
    <td>Authentication strategies</td>
  </tr>
  <tr>
    <td>04</td>
    <td>base-user-mngr</td>
    <td><a href="https://github.com/JuliusAgency/base-user-mngr">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/base-user-mngr">Link</a></td>
    <td>Base user functionality</td>
  </tr>
  <tr>
    <td>05</td>
    <td>base-user-sql</td>
    <td><a href="https://github.com/JuliusAgency/base-user-sql">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/base-user-sql">Link</a></td>
    <td>Base user entity for Sql Db</td>
  </tr>
  <tr>
    <td>06</td>
    <td>base-user-mongo</td>
    <td><a href="https://github.com/JuliusAgency/base-user-mongo">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/base-user-mongo">Link</a></td>
    <td>Base user model for MongoDb</td>
  </tr>
  <tr>
    <td>07</td>
    <td>authorization-ses-checker</td>
    <td><a href="https://github.com/JuliusAgency/authorization-ses-checker">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-ses-checker">Link</a></td>
    <td>Authorization middleware with session</td>
  </tr>
  <tr>
    <td>08</td>
    <td>authorization-jwt-checker</td>
    <td><a href="https://github.com/JuliusAgency/authorization-jwt-checker">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-jwt-checker">Link</a></td>
    <td>Authorization middleware with JWT</td>
  </tr>
  <tr>
    <td>09</td>
    <td>authorization-repo-mongo</td>
    <td><a href="https://github.com/JuliusAgency/authorization-repo-mongo">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-repo-mongo">Link</a></td>
    <td>ACL and RBAC models for MongoDb</td>
  </tr>
  <tr>
    <td>10</td>
    <td>authorization-repo-sql</td>
    <td><a href="https://github.com/JuliusAgency/authorization-repo-sql">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-repo-sql">Link</a></td>
    <td>ACL and RBAC entities for Sql Db</td>
  </tr>
  <tr>
    <td>11</td>
    <td>simple-email-client</td>
    <td><a href="https://github.com/JuliusAgency/simple-email-client">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/simple-email-client">Link</a></td>
    <td>Simple email client</td>
  </tr>
</tbody>
</table></div>

####   2. Public - sets of combinations of private packages are dedicated to be used in applications directly.  
#### Each of these packages is specialized for working with certain databases and flows.  

<div class="tg-wrap"><table>
<thead>
  <tr>
    <th>#</th>
    <th>Name</th>
    <th>Code</th>
    <th>Package</th>
    <th>Purpose</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>01</td>
    <td>auth-jwt-sql-set</td>
    <td><a href="https://github.com/JuliusAgency/auth-jwt-sql-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-jwt-sql-set">Link</a></td>
    <td>Authentication with JWT and Sql Db</td>
  </tr>
  <tr>
    <td>02</td>
    <td>auth-jwt-mongo-set</td>
    <td><a href="https://github.com/JuliusAgency/auth-jwt-mongo-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-jwt-mongo-set">Link</a></td>
    <td>Authentication with JWT and MongoDb</td>
  </tr>
  <tr>
    <td>03</td>
    <td>auth-ses-sql-set</td>
    <td><a href="https://github.com/JuliusAgency/auth-ses-sql-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-ses-sql-set">Link</a></td>
    <td>Authentication with session and Sql Db</td>
  </tr>
  <tr>
    <td>04</td>
    <td>auth-ses-mongo-set</td>
    <td><a href="https://github.com/JuliusAgency/auth-ses-mongo-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/auth-ses-mongo-set">Link</a></td>
    <td>Authentication with session and MongoDb</td>
  </tr>
  <tr>
    <td>05</td>
    <td>authorization-jwt-sql-set</td>
    <td><a href="https://github.com/JuliusAgency/authorization-jwt-sql-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-jwt-sql-set">Link</a></td>
    <td>Authorization with JWT and Sql Db</td>
  </tr>
  <tr>
    <td>06</td>
    <td>authorization-jwt-mongo-set</td>
    <td><a href="https://github.com/JuliusAgency/authorization-jwt-mongo-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-jwt-mongo-set">Link</a></td>
    <td>Authorization with JWT and MongoDb</td>
  </tr>
  <tr>
    <td>07</td>
    <td>authorization-ses-sql-set</td>
    <td><a href="https://github.com/JuliusAgency/authorization-ses-sql-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-ses-sql-set">Link</a></td>
    <td>Authorization with session and Sql Db</td>
  </tr>
  <tr>
    <td>08</td>
    <td>authorization-ses-mongo-set</td>
    <td><a href="https://github.com/JuliusAgency/authorization-ses-mongo-set">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/authorization-ses-mongo-set">Link</a></td>
    <td>Authorization with session and MongoDb</td>
  </tr>
  <tr>
    <td>09</td>
    <td>simple-emailer</td>
    <td><a href="https://github.com/JuliusAgency/simple-emailer">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/simple-emailer">Link</a></td>
    <td>Wrapper for simple email client</td>
  </tr>
  <tr>
    <td>10</td>
    <td>simple-error-handler</td>
    <td><a href="https://github.com/JuliusAgency/simple-error-handler">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/simple-error-handler">Link</a></td>
    <td>Simple error handler</td>
  </tr>
  <tr>
    <td>11</td>
    <td>simple-logger</td>
    <td><a href="https://github.com/JuliusAgency/simple-logger">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/simple-logger">Link</a></td>
    <td>Simple logger</td>
  </tr>
  <tr>
    <td>12</td>
    <td>http-logger</td>
    <td><a href="https://github.com/JuliusAgency/http-logger">Link</a></td>
    <td><a href="https://github.com/orgs/JuliusAgency/packages/npm/package/http-logger">Link</a></td>
    <td>Http logger</td>
  </tr>
</tbody>
</table></div>

####   3. Starters - applications are built with one of the public packages.  
####   Are dedicated to be used for developing an application without coding several base features.

<div class="tg-wrap"><table>
<thead>
  <tr>
    <th>#</th>
    <th>Name</th>
    <th>Code</th>
    <th>Package</th>
    <th>Purpose</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>01</td>
    <td> node-starter-with-auth-jwt-sql</td>
    <td><a href="https://github.com/JuliusAgency/node-starter-with-auth-jwt-sql">Link</a></td>
    <td></td>
    <td>Starter with JWT and Sql Db</td>
  </tr>
  <tr>
    <td>02</td>
    <td> node-starter-with-auth-jwt-mongo</td>
    <td><a href="https://github.com/JuliusAgency/node-starter-with-auth-jwt-mongo">Link</a></td>
    <td></td>
    <td>Starter with JWT and MongoDb</td>
  </tr>
  <tr>
    <td>03</td>
    <td> node-starter-with-auth-ses-sql</td>
    <td><a href="https://github.com/JuliusAgency/node-starter-with-auth-ses-sql">Link</a></td>
    <td></td>
    <td>Starter with session and Sql Db</td>
  </tr>
  <tr>
    <td>04</td>
    <td> node-starter-with-auth-ses-mongo</td>
    <td><a href="https://github.com/JuliusAgency/node-starter-with-auth-ses-mongo">Link</a></td>
    <td></td>
    <td>Starter with session and MongoDb</td>
  </tr>
</tbody>
</table></div>

### The preparation for developing a new application based on a starter:
#### 1. Create a folder:
```bash
mkdir <new-application-name>
cd <new-application-name>
```

#### 2. Clone the relevant starter, remove git repo and create new one:
```bash
git clone https://github.com/JuliusAgency/node-starter-with-<relevant starter>.git .
rm -r .git
git init -b main
```

#### 3. Install:
```bash
npm install
```

#### 4. Activate Git hooks:
```bash
npm run prepare
```
Note: After the command is executed once, the Git hooks will run automatically before each commit and push.

#### 2. Preparation for the usage of containerized databases and their UIs
```bash
sudo apt  install docker-compose
```
#### 3. Usage of the containerized data bases and it's UIs
[MongoDb](./docker-mongo/readme.md)   
[PostgresSql](./docker-pgsql/readme.md)   

#### 4. Run the starter 
```bash
cd ..
npm run dev
```
#### 5. Run the sanity test suit
```bash
```
### Develope your own application
#### 1. Extend the User model/entity 
#### 2. Create new domain(s) folder(s) under the app folder  
#### 3. Write code
#### 4. Write unit tests

## Thats all! 

### A package development
#### The infrastructure for a package development:
#### 1. The empty application [for test a package(s)](https://github.com/juliusagency/node-typescript-package-tester);
	The project includes:
	 - all tools (for linting, building, testing, e.t.c.);
	 - scripts for running these tools;
#### 2. The empty [base package project](https://github.com/juliusagency/npm-base-package).
	The project includes:
	 - all tools (for linting, building, testing, packaging, e.t.c.);
	 - scripts for running these tools;
	 - example of a test;
	 - README.md for developers;
	 - readme.md for the NPM repo;
	 - Git hooks for pre-commit (linting) and pre-push (testing);
	 - Github actions for build, test, and delivery of the package into the NPM repository.

### A new package development workflow:
#### 1. Prepare a code for packaging:
   - Define a feature that is dedicated to a package(s).
   - Copy the feature code to the test application (src folder).
   - Analyze the feature code and separate it from the application code.
   - Or may split the code into several parts (the future packages).
   - Leave the main part of the feature's code in the test application.
   - Test and change the code to do it like a package code.
#### 2. Prepare a project for the package:
   - Copy the empty base package from Github to a local machine (one copy for each package).
   - Rename the projects respectively.
#### 3. Build the package:
   - Move the code into the corresponding empty package repository.
   - Write tests for the package.
   - Test it.
   - Locally pack the code.
#### 4. Locally test the package:
   - Locally install the package in the test application.
   - Test the feature implemented as the package.
#### 5. Store the results:
   - Push the project into Github (create a remote repo for the package code).
   - Copy the .tgz and readme.md to the packages repo and push the commit.
#### 6. The package is ready for a local testing in an application.

#### 7. Publish the package into the Github Package Registry after these tests.  
   - A package will be built and published automatically via CI/CD pipeline (Github Actions),
#### 8. Installation from the GitHub Package Registry:  
   - Go to: Settings -> Developer Settings -> Personal access tokens - Tokens(classic). 
   - Create Personal access token in your Github account for Download packages  
      from GitHub Package Registry with the permission - read:packages
   - Create .npmrc file in the root directory of your project with the content:  
```
      @juliusagency:registry=https://npm.pkg.github.com  
      //npm.pkg.github.com/:_authToken=<YOUR_TOKEN>  
      npm.pkg.github.com/:always-auth: false  
```
   - Install/uninstall a package with the command:  
```bash
npm i --save @juliusagency/<package name>
npm uninstall @juliusagency/<package name>

```

 ### Usage of a package:
  See the corresponding README.md file.


